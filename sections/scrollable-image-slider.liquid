{% schema %}
{
  "name": "Scrollable Image Slider",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt text",
          "default": "Slide image"
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Scrollable Image Slider",
      "category": "Media"
    }
  ]
}
{% endschema %}

<div class="swiper-scroll-wrapper" style="background-color: {{ section.settings.background_color }};">
  <div class="swiper mySwiper">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        {% if block.settings.image %}
          <div class="swiper-slide">
            <img
              src="{{ block.settings.image | image_url: width: 1200 }}"
              alt="{{ block.settings.alt_text }}"
              loading="lazy"
            >
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<style>
.swiper-scroll-wrapper {
  padding: 20px 0;
}

.swiper {
  width: 100%;
}

.swiper-slide {
  width: auto;
  flex-shrink: 0;
  margin-right: 16px;
}

.swiper-slide img {
  display: block;
  height: auto;
  max-width: 100%;
  border-radius: 10px;
}
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    new Swiper(".mySwiper", {
      slidesPerView: "auto",
      spaceBetween: 16,
      freeMode: true,
      mousewheel: true,
      grabCursor: true
    });
  });
</script>
